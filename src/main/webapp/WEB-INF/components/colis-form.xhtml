<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<div class="modal-overlay" id="add-modal-overlay" style="display: none; position: fixed; inset: 0; background-color: rgba(0, 0, 0, 0.5); z-index: 50; align-items: center; justify-content: center;">
    <div class="bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto m-4 shadow-xl">

        <!-- Header -->
        <div class="sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center rounded-t-lg">
            <h3 class="text-lg font-semibold text-gray-800">Ajouter un nouveau colis</h3>
            <h:form>
                <h:commandLink action="colis?faces-redirect=true"
                               immediate="true"
                               styleClass="text-gray-400 hover:text-gray-600 transition">
                    <i class="ri-close-line text-2xl"></i>
                </h:commandLink>
            </h:form>
        </div>

        <!-- Form -->
        <h:form id="colisForm">
            <div class="p-6 space-y-4">

                <!-- Description -->
                <div>
                    <label for="description" class="block text-sm font-medium text-gray-700 mb-1">
                        Description <span class="text-red-500">*</span>
                    </label>
                    <h:inputTextarea id="description"
                                     value="#{colisBean.description}"
                                     styleClass="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"
                                     rows="3"
                                     required="true"
                                     requiredMessage="La description est obligatoire" />
                    <h:message for="description" styleClass="text-red-500 text-xs mt-1" />
                </div>

                <!-- Poids -->
                <div>
                    <label for="poids" class="block text-sm font-medium text-gray-700 mb-1">
                        Poids (kg) <span class="text-red-500">*</span>
                    </label>
                    <h:inputText id="poids"
                                 value="#{colisBean.poids}"
                                 styleClass="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                 placeholder="0.0"
                                 required="true"
                                 requiredMessage="Le poids est obligatoire" />
                    <h:message for="poids" styleClass="text-red-500 text-xs mt-1" />
                </div>

                <!-- Rue -->
                <div>
                    <label for="rue" class="block text-sm font-medium text-gray-700 mb-1">
                        Rue <span class="text-red-500">*</span>
                    </label>
                    <h:inputText id="rue"
                                 value="#{colisBean.rue}"
                                 styleClass="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                 required="true"
                                 requiredMessage="La rue est obligatoire" />
                    <h:message for="rue" styleClass="text-red-500 text-xs mt-1" />
                </div>

                <!-- Ville et Code postal (en ligne) -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="ville" class="block text-sm font-medium text-gray-700 mb-1">
                            Ville <span class="text-red-500">*</span>
                        </label>
                        <h:inputText id="ville"
                                     value="#{colisBean.ville}"
                                     styleClass="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                     required="true"
                                     requiredMessage="La ville est obligatoire" />
                        <h:message for="ville" styleClass="text-red-500 text-xs mt-1" />
                    </div>
                    <div>
                        <label for="codePostal" class="block text-sm font-medium text-gray-700 mb-1">
                            Code postal <span class="text-red-500">*</span>
                        </label>
                        <h:inputText id="codePostal"
                                     value="#{colisBean.codePostal}"
                                     styleClass="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                     required="true"
                                     requiredMessage="Le code postal est obligatoire" />
                        <h:message for="codePostal" styleClass="text-red-500 text-xs mt-1" />
                    </div>
                </div>

                <!-- Pays -->
                <div>
                    <label for="pays" class="block text-sm font-medium text-gray-700 mb-1">
                        Pays <span class="text-red-500">*</span>
                    </label>
                    <h:inputText id="pays"
                                 value="#{colisBean.pays}"
                                 styleClass="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                 required="true"
                                 requiredMessage="Le pays est obligatoire" />
                    <h:message for="pays" styleClass="text-red-500 text-xs mt-1" />
                </div>

            </div>

            <!-- Footer -->
            <div class="sticky bottom-0 bg-gray-50 px-6 py-4 flex justify-end space-x-3 border-t border-gray-200 rounded-b-lg">
                <h:commandButton value="Annuler"
                                 action="colis?faces-redirect=true"
                                 immediate="true"
                                 styleClass="px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition text-sm font-medium" />
                <h:commandButton value="Enregistrer"
                                 action="#{colisBean.ajouterColis}"
                                 styleClass="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition text-sm font-medium" />
            </div>
        </h:form>
    </div>
</div>

<script>
    // Ouvrir le modal
    document.addEventListener('DOMContentLoaded', function() {
        const openBtn = document.getElementById('open-modal-btn');
        const modal = document.getElementById('add-modal-overlay');

        if (openBtn &amp;&amp; modal) {
            openBtn.addEventListener('click', function(e) {
                e.preventDefault();
                modal.style.display = 'flex';
            });
        }

        // Fermer en cliquant sur l'overlay
        if (modal) {
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    window.location.href = 'colis.xhtml';
                }
            });
        }
    });
</script>

</html>