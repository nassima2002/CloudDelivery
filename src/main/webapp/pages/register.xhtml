<!-- ==================== PAGE INSCRIPTION CLIENT ==================== -->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html">
<h:head>
    <title>Inscription - Espace Client</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet" />
    <style>
        .shake {
            animation: shake 0.5s;
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
    </style>
</h:head>

<h:body class="bg-gradient-to-br from-sky-50 to-sky-100 min-h-screen flex items-center justify-center p-4">
    <div class="bg-white shadow-2xl rounded-2xl w-full max-w-md overflow-hidden">

        <!-- En-tête Inscription -->
        <div class="bg-gradient-to-r from-sky-500 to-sky-400 text-white text-center p-8">
            <div class="inline-flex items-center justify-center w-20 h-20 bg-white/20 rounded-full mb-4">
                <i class="ri-user-add-line text-5xl"></i>
            </div>
            <h1 class="text-3xl font-bold mb-2">Créer un compte</h1>
            <p class="text-sm opacity-90">Rejoignez-nous en quelques instants</p>
        </div>

        <!-- Formulaire -->
        <div class="p-8">
            <h:form id="registerForm">

                <!-- Messages d'erreur -->
                <h:messages globalOnly="true"
                            styleClass="bg-red-50 border-l-4 border-red-500 text-red-700 p-4 rounded-lg mb-6 text-sm"
                            errorClass="flex items-start mb-2"
                            warnClass="flex items-start mb-2 bg-yellow-50 border-yellow-500 text-yellow-700"
                            infoClass="flex items-start mb-2 bg-green-50 border-green-500 text-green-700"
                            layout="list" />

                <!-- Nom -->
                <div class="mb-4">
                    <h:outputLabel for="nom" styleClass="block text-gray-700 font-semibold mb-2 flex items-center">
                        <i class="ri-user-line mr-2 text-sky-600 text-lg"></i>
                        <span>Nom</span>
                    </h:outputLabel>
                    <h:inputText id="nom"
                                 value="#{registerBean.utilisateur.nom}"
                                 styleClass="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-sky-500 focus:outline-none transition"
                                 placeholder="Votre nom"
                                 required="true"
                                 requiredMessage="⚠️ Le nom est obligatoire">
                    </h:inputText>
                    <h:message for="nom" styleClass="text-red-600 text-sm mt-2 flex items-center">
                        <i class="ri-error-warning-line mr-1"></i>
                    </h:message>
                </div>

                <!-- Prénom -->
                <div class="mb-4">
                    <h:outputLabel for="prenom" styleClass="block text-gray-700 font-semibold mb-2 flex items-center">
                        <i class="ri-user-smile-line mr-2 text-sky-600 text-lg"></i>
                        <span>Prénom</span>
                    </h:outputLabel>
                    <h:inputText id="prenom"
                                 value="#{registerBean.utilisateur.prenom}"
                                 styleClass="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-sky-500 focus:outline-none transition"
                                 placeholder="Votre prénom"
                                 required="true"
                                 requiredMessage="⚠️ Le prénom est obligatoire">
                    </h:inputText>
                    <h:message for="prenom" styleClass="text-red-600 text-sm mt-2 flex items-center">
                        <i class="ri-error-warning-line mr-1"></i>
                    </h:message>
                </div>

                <!-- Email -->
                <div class="mb-4">
                    <h:outputLabel for="email" styleClass="block text-gray-700 font-semibold mb-2 flex items-center">
                        <i class="ri-mail-line mr-2 text-sky-600 text-lg"></i>
                        <span>Adresse Email</span>
                    </h:outputLabel>
                    <h:inputText id="email"
                                 value="#{registerBean.utilisateur.email}"
                                 styleClass="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-sky-500 focus:outline-none transition"
                                 placeholder="exemple@email.com"
                                 required="true"
                                 requiredMessage="⚠️ L'email est obligatoire"
                                 validatorMessage="⚠️ Format d'email invalide">
                    </h:inputText>
                    <h:message for="email" styleClass="text-red-600 text-sm mt-2 flex items-center">
                        <i class="ri-error-warning-line mr-1"></i>
                    </h:message>
                </div>

                <!-- Mot de passe -->
                <div class="mb-6">
                    <h:outputLabel for="motDePasse" styleClass="block text-gray-700 font-semibold mb-2 flex items-center">
                        <i class="ri-lock-password-line mr-2 text-sky-600 text-lg"></i>
                        <span>Mot de passe</span>
                    </h:outputLabel>
                    <h:inputSecret id="motDePasse"
                                   value="#{registerBean.utilisateur.motDePasse}"
                                   styleClass="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-sky-500 focus:outline-none transition"
                                   placeholder="••••••••"
                                   required="true"
                                   requiredMessage="⚠️ Le mot de passe est obligatoire" />
                    <h:message for="motDePasse" styleClass="text-red-600 text-sm mt-2 flex items-center">
                        <i class="ri-error-warning-line mr-1"></i>
                    </h:message>
                    <p class="text-xs text-gray-500 mt-2 flex items-start">
                        <i class="ri-information-line mr-1 mt-0.5"></i>
                        <span>Minimum 8 caractères recommandés</span>
                    </p>
                </div>

                <!-- Rôle caché -->
                <h:inputHidden id="role" value="CLIENT" />

                <!-- Bouton d'inscription -->
                <h:commandButton value="S'inscrire"
                                 styleClass="w-full bg-sky-500 hover:bg-sky-600 active:bg-sky-700 text-white font-bold py-3 rounded-lg shadow-lg hover:shadow-xl transition duration-200 transform hover:scale-[1.02] flex items-center justify-center"
                                 action="#{registerBean.register}">
                </h:commandButton>

                <!-- Séparateur -->
                <div class="relative my-6">
                    <div class="absolute inset-0 flex items-center">
                        <div class="w-full border-t border-gray-300"></div>
                    </div>
                    <div class="relative flex justify-center text-sm">
                        <span class="px-4 bg-white text-gray-500">Déjà inscrit ?</span>
                    </div>
                </div>

                <!-- Lien vers connexion -->
                <h:link outcome="login.xhtml"
                        styleClass="flex items-center justify-center w-full px-4 py-2.5 border-2 border-sky-200 text-sky-600 rounded-lg hover:bg-sky-50 transition group">
                    <i class="ri-login-box-line text-xl mr-2 group-hover:scale-110 transition-transform"></i>
                    <span class="font-medium">Se connecter</span>
                </h:link>

                <!-- Footer -->
                <div class="mt-6 pt-4 border-t border-gray-200 text-center">
                    <p class="text-xs text-gray-500">
                        <i class="ri-shield-check-line mr-1"></i>
                        Vos données sont protégées et sécurisées
                    </p>
                </div>

            </h:form>
        </div>
    </div>

    <!-- Animation shake sur erreur -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const messages = document.querySelector('.bg-red-50');
            if (messages) {
                messages.classList.add('shake');
            }
        });
    </script>

</h:body>
</html>